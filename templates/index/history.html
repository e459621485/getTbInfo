{% extends 'index/base.html' %}

{% block title %}历史记录{% endblock %}

{% block left %}
    <div class="layui-side layui-bg-black">
    <div class="layui-side-scroll">
      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
      <ul class="layui-nav layui-nav-tree" lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">历史记录</a>
<!--          <dl class="layui-nav-child">-->
<!--            <dd><a href="">搜索</a></dd>-->
<!--            <dd><a href="">详细信息</a></dd>-->
<!--          </dl>-->
      </ul>
    </div>
  </div>
{% endblock %}

{% block body %}
<div class="layui-body">
    <div class="layui-container layui-row">
        <div class="layui-col-md10">
            <table class="layui-table" lay-data="{height: 'full-200', cellMinWidth: 80, url:{{ url }}, page:true, id:'idTest'}" lay-filter="demo">
                <thead>
                    <tr>
                      <th lay-data="{field:'id', sort: true, width:60}">ID</th>
                      <th lay-data="{field:'title', width:383}">名称</th>
                      <th lay-data="{field:'price', sort: true, width:130}">价格</th>
                      <th lay-data="{field:'seller', width:130}">商家</th>
                      <th lay-data="{field:'datetime', width:170}">查询日期</th>
                      <th lay-data="{fixed: 'right', width:70, align:'center', toolbar: '#barDemo'}">操作</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
</script>

<script>
layui.use('table', function(){
  var table = layui.table;

  //监听工具条
  table.on('tool(demo)', function(obj){
    var data = obj.data;
    if(obj.event === 'detail'){
      window.location.href="{% url 'index_result' %}" + data.id + "/";
    }
  });
});
</script>
{% endblock %}